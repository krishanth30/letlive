function getCurrentTabUrl(a){var b={active:!0,currentWindow:!0};chrome.tabs.query(b,function(b){var c=b[0];a(c.url)})}function markActive(a){if(void 0!=site&&""!=site){jQuery("#message").hide();var b={};b[site]={},b[site].active=1,b[site].mins=a,chrome.storage.sync.set(b),chrome.tabs.query({active:!0,currentWindow:!0},function(a){chrome.tabs.sendMessage(a[0].id,{message:"mark_active"})})}else jQuery("#message").text("Unable to mark active.").show()}function markInActive(a){if(void 0!=site&&""!=site){jQuery("#message").hide();var b={};b[site]={},b[site].active=0,b[site].mins=a,chrome.storage.sync.set(b),chrome.tabs.query({active:!0,currentWindow:!0},function(a){chrome.tabs.sendMessage(a[0].id,{message:"mark_inactive"})})}else jQuery("#message").text("Unable to mark inactive.").show()}function extractName(a){var b;return b=a.indexOf("://")>-1?a.split("/")[2]:a.split("/")[0],b=b.split(":")[0],b.replace(new RegExp("[.]","g"),"")}var site;jQuery(document).ready(function(){getCurrentTabUrl(function(a){site=a,null!=site&&void 0!=site&&""!=site&&-1==site.indexOf("chrome://")?(site=extractName(site),chrome.storage.sync.get(site,function(a){void 0!=a&&void 0!=a[site]&&1==a[site].active?(document.getElementById("mark").src="on.png",jQuery("#time")[0].value=a[site].mins):void 0!=a[site]&&null!=a[site]&&0==a[site].active?(document.getElementById("mark").src="off.png",void 0!=a[site].mins&&(jQuery("#time")[0].value=a[site].mins)):document.getElementById("mark").src="off.png"})):document.getElementById("mark").src="off.png"});var b=jQuery("#message");jQuery(b).hide(),$(document).ready(function(){$("#time").keydown(function(a){-1!==$.inArray(a.keyCode,[46,8,9,27,13,110])||65===a.keyCode&&(!0===a.ctrlKey||!0===a.metaKey)||a.keyCode>=35&&a.keyCode<=40||(a.shiftKey||a.keyCode<48||a.keyCode>57)&&(a.keyCode<96||a.keyCode>105)&&a.preventDefault()})}),document.getElementById("mark").addEventListener("click",function(a){if(null!=site&&void 0!=site&&""!=site&&-1==site.indexOf("chrome://")){jQuery(b).hide();var c=a.target,d=jQuery("#time").val();-1!=c.src.indexOf("on.png")?(markInActive(d),c.src="off.png"):-1!=c.src.indexOf("off.png")&&(isNaN(d)||d<1||d>1440?jQuery(b).text("Minutes should be a whole number between 1 and 1440.").show():(markActive(d),c.src="on.png"))}else jQuery(b).text("Cannot be set. Invalid url.").show()})});